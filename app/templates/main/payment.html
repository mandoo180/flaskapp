{% extends 'base.html' %}

{% block page_content %}
<div>
  <button id="btn-pay">Pay</button>
  <script src="https://js.tosspayments.com/v1"></script>
  <script>
    const $btn = document.getElementById('btn-pay')
    $btn.addEventListener('click', async e => {
      const client_key = 'test_ck_D5GePWvyJnrK0W0k6q8gLzN97Eoq'
      const toss = TossPayments(client_key)
      try {
        const resp = await toss.requestPayment('카드', {
          amount: 15000,
          orderId: 'JuGP80RyxRvNRnE9RbBEE',
          orderName: '토스 티셔츠 외 2건',
          customerName: '박토스',
          successUrl: 'http://localhost:5000/success',
          failUrl: 'http://localhost:5000/fail',
        })
      } catch (error) {
        console.log(error)
      }
    })
  </script>
</div>
{% endblock %}
